<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>JSONP</title>
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet">
    <style>
    body {
        font-family: 'Source Sans Pro', 'Helvetica Neue', Arial, sans-serif;
        font-size: 15px;
    }
    </style>
</head>
<body>
  <h1>Hello, world!</h1>
  <hr />
  <p>
     This is a JSON-P demostration. We are making a request to http://localhost:3000/req/1/jsonp?callback=myCallback.
     The function "myCallback" is specified on this page and accepts a parameter. Behind the scences, a SCRIPT tag will be created and
     inside it will have a function invocation passing in the data from the server.

     Note that this is a hack and requires the cooperation of the external API.
  </p>
    <script
    src="https://code.jquery.com/jquery-3.1.1.min.js"
    integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
    crossorigin="anonymous"></script>

    <script>

      $.ajax({
        url: "http://localhost:3000/req/1" + "/jsonp?callback=myCallback",
        jsonp: "callback",
        dataType: "jsonp",
      });

      function myCallback(payload) {
        alert('Fired, the msg from server reads: "' + payload.msg + '" \n(Open console to see the respoonse body)');
        console.log("**", payload, "**");
        console.log("msg:", payload.msg);
        console.log("body", payload.body);
      }

    </script>
</body>
</html>
